<!DOCTYPE html>
<html lang="en">
<head>
    {{ template "partials/header" . }}
</head>
<body>
    <header>
        {{ template "partials/nav" . }}
    </header>

    <div class="wrapper">
        <div class="ma-layout-wrap">
            <div class="ma-layout clearfix">
                <div class="ma-layout-col-left">
                    <div class="ma-infobox">
                        <div class="ma-infobox-logo">
                            <img src="{{ .AppInfo.MainImage }}" class="sectionImg">
                        </div>
                        <div class="ma-infobox-table">
                            <dl>
                                <dt>プラットフォーム:</dt><dd>{{ .AppInfo.Platform }}</dd>
                                <dt>カテゴリ:</dt><dd>{{ .AppInfo.Category }}</dd>
                                <dt>プログラミング言語:</dt><dd>{{ .AppInfo.Language }}</dd>
                            </dl>
                        </div>
                    </div>
                    <div class="ma-infobox">
                        <div class="ma-infobox-table">
                            <dl>
                                <dt>ミーティング場所:</dt><dd>{{ .AppInfo.Area }}</dd>
                                <dt>ミーティング頻度:</dt><dd>{{ .AppInfo.Frequency }}</dd>
                                <dt>プロジェクト開始日:</dt><dd>{{ .AppInfo.StartDate }}</dd>
                                <dt>リリース予定日:</dt><dd>{{ .AppInfo.ReleaseDate }}</dd>
                            </dl>
                        </div>
                    </div>
                    <div class="ma-infobox">
                        <div class="ma-star-wrap text-center">
                            <figure class="ma-app-star-count">
                                <figcaption class="star">★</figcaption>
                                <strong class="count">125</strong>
                            </figure>
                            <!-- TODO: まだstarしていない場合 -->
                            <button class="ma-app-star-btn btn btn-primary" data-api="star" type="button"><i class="icon"></i><span>スターする</span></button>
                            <!-- TODO: 既にstarしている場合 -->
                            <button class="ma-app-star-btn btn btn-primary" data-api="unstar" type="button"><i class="icon"></i><span>はずす</span></button>
                            <div class="social">
                                <div class="fb-like" data-href="" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false"></div>
                                <a href="https://twitter.com/share" class="twitter-share-button" data-url="" data-via="" data-lang="en">Tweet</a>
                            </div>
                        </div>
                    </div>
                    <div class="ma-infobox">
                        <div style="height: 72px;padding-top:2px;"><h3>Adsense</h3></div>
                    </div>
                </div>
                <div class="ma-layout-col-right">
                    <!-- TODO: 管理者の場合のみ表示 -->
                    <div class="ma-white-wrap text-center">
                        <input class="ma-app-edit-btn btn btn-primary" type="button" value="開発アイデアを編集する">
                        <input class="ma-app-delete-btn btn btn-primary" type="button" value="開発アイデアを削除する">
                    </div>

                    <div class="ma-white-wrap">
                        <section>
                            <div>
                                <h1>{{ .AppInfo.Name }}</h1>
                                <div class="sectionDesc">{{ .AppInfo.Description }}</div>
                            </div>
                        </section>
                        <section>
                            <div class="row text-center">
                                {{range .AppInfo.ImageURLs }}
                                <div class="sectionImgWrap">
                                    <img src="{{ .URL }}" class="sectionImg">
                                </div>
                                {{end}}
                            </div>
                        </section>
                        <section>
                            <div class="section-heading">
                                <h3>URL</h3>
                                <div class="divider"></div>
                            </div>
                            {{if .AppInfo.DemoURL }}
                            <dl>
                                <dt>Demo URL:</dt><dd><a href="{{ .AppInfo.DemoURL }}" target="_blank">{{ .AppInfo.DemoURL }}</a></dd>
                            </dl>
                            {{end}}
                            {{if .AppInfo.GitHubURL }}
                            <dl>
                                <dt>Github URL:</dt><dd><a href="{{ .AppInfo.GitHubURL }}" target="_blank">{{ .AppInfo.GitHubURL }}</a></dd>
                            </dl>
                            {{end}}
                        </section>
                        <section>
                            <div class="section-heading">
                                <h3>募集中のメンバー</h3>
                                <div class="divider"></div>
                            </div>
                            <dl>
                                {{range .AppInfo.RecruitMember }}
                                <dt>{{ .Occupation }}</dt>
                                {{end}}
                            </dl>
                        </section>
                    </div>
                    {{if .AppInfo.GitHubURL }}
                        <div class="ma-white-wrap">
                            <section>
                                <div class="section-heading">
                                    <h3>Github Issues</h3>
                                    <div class="divider"></div>
                                </div>
                                <div>
                                    <div class="ma-github-issues" data-url="{{ .AppInfo.GitHubURL }}"></div>
                                </div>
                            </section>
                        </div>
                    {{end}}
                    <div class="ma-white-wrap">
                        <section>
                            <div class="section-heading">
                                <h3>現在のメンバー</h3>
                                <div class="divider"></div>
                            </div>
                            <div>
                                {{range .AppInfo.Members }}
                                <!-- TODO: userinfoをつかう -->
                                <div class="ma-profile">
                                    <a href="#">
                                        <div class="ma-profile-image-wrap">
                                            <img class="img-rounded ma-profile-image" src="{{ .IconImageURL }}">
                                        </div>
                                        <div class="ma-profile-content-wrap">
                                            <div class="ma-profile-content">
                                                <div class="ma-profile-name">{{ .Name }}</div>
                                                <div class="ma-profile-title">{{ .Occupation }}</div>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                                {{end}}
                            </div>
                        </section>
                    </div>
                    <div class="ma-white-wrap">
                        <section>
                            <div class="section-heading">
                                <h3>聞いてみる</h3>
                                <div class="divider"></div>
                            </div>
                            <ul class="ma-list-bordered ma-discussion-wrap">
                                {{range .AppInfo.Discussions }}
                                <li class="ma-profile-comment">
                                    <span class="ma-profile-date subtle-text" data-timestamp="{{ .Timestamp }}"></span>
                                    <a href="#">
                                        <div class="ma-profile-image-wrap">
                                            <img class="img-rounded ma-profile-image" src="{{ .IconImageURL }}">
                                        </div>
                                    </a>
                                    <div class="ma-profile-message">
                                        <p>{{ .Message }}</p>
                                    </div>
                                </li>                                
                                {{end}}
                            </ul>
                            <div class="row text-center">
                                <form class="ma-profile-comment-form">
                                    <div class="form-group col-xs-11">
                                        <textarea id="ma_detail_discussion_comment" name="description" class="form-control" rows="4"></textarea>
                                        <input class="ma_detail_discussion_comment_btn btn btn-primary" type="button" value="コメント">
                                    </div>
                                </form>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>
        <footer>
            {{ template "partials/footer" . }}
        </footer>
    </div>
    {{ template "partials/scripts" . }}
</body>
</html>
